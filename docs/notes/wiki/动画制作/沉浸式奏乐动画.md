---
title: 沉浸式奏乐动画
createTime: 2026/01/04 23:36:29
permalink: /wiki/animation/immersive-melodies/
icon: mingcute:music-line
---

`2.6.0` 版本对沉浸式奏乐添加了进一步的联动，使乐器动画更加生动

## 添加定位文件
默认模型的沉浸式奏乐动画全部放置于 `im.animation.json`文件中，本质为手部条件动画。会在玩家手持对应物品，进行相关操作时播放。

如果需要修改默认路径，则需要去你的 `ysm.json` 的 `animation` 字段里添加一个新的字段 `immersive_melodies` 如下图所示：
```jsonc title="ysm.json"
"animation": {
    "main": "animations/main.animation.json",
    //...

    //这里填你的路径
    "immersive_melodies": "animations/im.animation.json"
}
```

动画清单较多，这里不一一列出，参考默认模型的`im.animation.json`内的所有动画

## 联动变量
|      Molang       |                 描述                 |
| :---------------: | :----------------------------------: |
| `ctrl.im_current` |          电平强度，范围0-1           |
|  `ctrl.im_delta`  | 自上次音符输出后经过的时间（单位：ms） |
|  `ctrl.im_pitch`  |         音高，一般是0-2之间          |
| `ctrl.im_volume`  |       音符强度，一般是0-2之间        |
|  `ctrl.im_time`   |         自开始演奏后过的时间         |
